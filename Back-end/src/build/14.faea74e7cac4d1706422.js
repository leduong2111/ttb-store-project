(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{776:function(e,t,r){"use strict";r.r(t);var n=r(69),a=r.n(n),o=r(49),c=r.n(o),u=r(68),d=r.n(u),i=r(24),s=r.n(i),l=r(44),p=r.n(l),f=r(465),h=r(712),m=r(231),y=r(89),b=r(54),O=r(214),g=r(705),v=r(745),w=r(38),k=r(0),P=r.n(k),x=r(33);function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(){for(var e=[],t=0;t<7;++t)e.push({value:t,text:w.a.convertOrderStatus(t)});return e}t.default=function(){var e=Object(k.useState)([]),t=s()(e,2),r=t[0],n=t[1],o=Object(k.useState)(!0),c=s()(o,2),u=c[0],i=c[1],l=function(){var e=d()(p.a.mark((function e(t,a){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.postUpdateOrderStatus(t,a);case 3:e.sent&&(f.b.success("Cập nhật thành công"),n(r.map((function(e){return e.orderId===t?j(j({},e),{},{orderStatus:a}):j({},e)})))),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),f.b.success("Cập nhật thất bại");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}(),S=[{title:"khách hàng",key:"owner",dataIndex:"owner"},{title:"Mã đơn hàng",key:"orderCode",dataIndex:"orderCode",render:function(e){return P.a.createElement("a",null,e)}},{title:"Ngày đặt",key:"orderDate",dataIndex:"orderDate",sorter:function(e,t){return e.orderDate>t.orderDate?1:e.orderDate<t.orderDate?-1:0}},{title:"Sản phẩm",key:"prodName",dataIndex:"prodName",render:function(e,t){return P.a.createElement(y.a,{title:e},P.a.createElement(x.b,{to:"/product/".concat(t.idProduct)},w.a.reduceProductName(e,30)))}},{title:"Tổng tiền",key:"totalMoney",dataIndex:"totalMoney",render:function(e){return P.a.createElement("b",{style:{color:"#333"}},w.a.formatProductPrice(e))},sorter:function(e,t){return e.totalMoney-t.totalMoney}},{title:"HT thanh toán",key:"paymentMethod",dataIndex:"paymentMethod",render:function(e){return 0===e?"Tiền mặt":"VNPay"}},{title:"Trạng thái đơn hàng",key:"orderStatus",dataIndex:"orderStatus",filters:C(),onFilter:function(e,t){return t.orderStatus===e},render:function(e){return w.a.convertOrderStatus(e)}},{title:"",render:function(e,t){return P.a.createElement(b.a,{type:"dashed",onClick:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=e,a=h.a.info({width:768,title:"Cập nhật trạng thái đơn hàng #".concat(t),content:P.a.createElement(m.a.Group,{defaultValue:e,onChange:function(e){return n=e.target.value},className:"m-t-12"},C().map((function(e,t){return P.a.createElement(m.a,{className:"m-b-8",key:t,value:e.value},e.text)}))),centered:!0,icon:null,okText:"Cập nhật",onOk:function(){l(r,n),a.destroy()}})}(t.orderStatus,t.orderCode,t.orderId)}},"Cập nhật")}}];return Object(k.useEffect)((function(){var e=!0;function t(){return(t=d()(p.a.mark((function t(){var r,o,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i(!0),t.next=4,v.a.getOrderList();case 4:r=t.sent,e&&r&&(o=r.data.list,c=o.map((function(e,t){return{key:t,owner:e.owner,orderCode:e.orderCode,orderDate:w.a.formatOrderDate(e.orderDate),prodName:e.orderProd.name,totalMoney:e.numOfProd*(e.orderProd.price-e.orderProd.price*e.orderProd.discount/100),paymentMethod:e.paymentMethod,orderStatus:e.orderStatus,idProduct:e.orderProd.id,orderId:e._id}})),n(a()(c)),i(!1)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),e&&i(!1);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){e=!1}}),[]),P.a.createElement(P.a.Fragment,null,u?P.a.createElement(O.a,{className:"trans-center",tip:"Đang lấy danh sách đơn hàng ..."}):P.a.createElement(g.a,{columns:S,dataSource:r,pagination:{showLessItems:!0,position:["bottomCenter"]}}))}}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvY29udGFpbmVycy9BZG1pblBhZ2UvT3JkZXJMaXN0L2luZGV4LmpzIl0sIm5hbWVzIjpbImdlbmVyYXRlRmlsdGVyT3JkZXIiLCJyZXN1bHQiLCJpIiwicHVzaCIsInZhbHVlIiwidGV4dCIsImhlbHBlcnMiLCJjb252ZXJ0T3JkZXJTdGF0dXMiLCJPcmRlckxpc3QiLCJ1c2VTdGF0ZSIsImRhdGEiLCJzZXREYXRhIiwiaXNMb2FkaW5nIiwic2V0SXNMb2FkaW5nIiwidXBkYXRlT3JkZXJTdGF0dXMiLCJpZCIsIm9yZGVyU3RhdHVzIiwiYWRtaW5BcGkiLCJwb3N0VXBkYXRlT3JkZXJTdGF0dXMiLCJtZXNzYWdlIiwic3VjY2VzcyIsIm1hcCIsIml0ZW0iLCJvcmRlcklkIiwiY29sdW1ucyIsInRpdGxlIiwia2V5IiwiZGF0YUluZGV4IiwicmVuZGVyIiwidiIsInNvcnRlciIsImEiLCJiIiwib3JkZXJEYXRlIiwicHJvZE5hbWUiLCJyZWNvcmQiLCJ0byIsImlkUHJvZHVjdCIsInJlZHVjZVByb2R1Y3ROYW1lIiwic3R5bGUiLCJjb2xvciIsImZvcm1hdFByb2R1Y3RQcmljZSIsInRvdGFsTW9uZXkiLCJmaWx0ZXJzIiwib25GaWx0ZXIiLCJfdiIsInJlY29yZHMiLCJ0eXBlIiwib25DbGljayIsImRlZmF1bHRWYWwiLCJvcmRlckNvZGUiLCJ2YWx1ZUN1cnIiLCJtb2RhbCIsIk1vZGFsIiwiaW5mbyIsIndpZHRoIiwiY29udGVudCIsIkdyb3VwIiwiZGVmYXVsdFZhbHVlIiwib25DaGFuZ2UiLCJ0YXJnZXQiLCJjbGFzc05hbWUiLCJpbmRleCIsImNlbnRlcmVkIiwiaWNvbiIsIm9rVGV4dCIsIm9uT2siLCJkZXN0cm95IiwiVXBkYXRlT3JkZXJTdGF0dXNNb2RhbCIsInVzZUVmZmVjdCIsImlzU3Vic2NyaWJlIiwiZ2V0T3JkZXJMaXN0IiwicmVzcG9uc2UiLCJsaXN0IiwibmV3TGlzdCIsIm93bmVyIiwiZm9ybWF0T3JkZXJEYXRlIiwib3JkZXJQcm9kIiwibmFtZSIsIm51bU9mUHJvZCIsInByaWNlIiwiZGlzY291bnQiLCJwYXltZW50TWV0aG9kIiwiX2lkIiwidGlwIiwiZGF0YVNvdXJjZSIsInBhZ2luYXRpb24iLCJzaG93TGVzc0l0ZW1zIiwicG9zaXRpb24iXSwibWFwcGluZ3MiOiJrMkJBTUEsU0FBU0EsSUFFUCxJQURBLElBQUlDLEVBQVMsR0FDSkMsRUFBSSxFQUFHQSxFQUFJLElBQUtBLEVBQ3ZCRCxFQUFPRSxLQUFLLENBQUVDLE1BQU9GLEVBQUdHLEtBQU1DLElBQVFDLG1CQUFtQkwsS0FFM0QsT0FBT0QsRUFvTE1PLFVBakxmLFdBQ0UsTUFBd0JDLG1CQUFTLElBQUcsV0FBN0JDLEVBQUksS0FBRUMsRUFBTyxLQUNwQixFQUFrQ0Ysb0JBQVMsR0FBSyxXQUF6Q0csRUFBUyxLQUFFQyxFQUFZLEtBR3hCQyxFQUFpQiwrQkFBRyxXQUFPQyxFQUFJQyxHQUFXLDBGQUVyQkMsSUFBU0Msc0JBQXNCSCxFQUFJQyxHQUFZLE9BQXJELEVBQUgsT0FFWkcsSUFBUUMsUUFBUSx1QkFDaEJULEVBQ0VELEVBQUtXLEtBQUksU0FBQ0MsR0FBSSxPQUNaQSxFQUFLQyxVQUFZUixFQUFLLEVBQUgsS0FBUU8sR0FBSSxJQUFFTixnQkFBVyxLQUFVTSxRQUczRCxnREFFREgsSUFBUUMsUUFBUSxxQkFBcUIseURBRXhDLGdCQWRzQix3Q0E0Q2pCSSxFQUFVLENBQ2QsQ0FDRUMsTUFBTyxhQUNQQyxJQUFLLFFBQ0xDLFVBQVcsU0FFYixDQUNFRixNQUFPLGNBQ1BDLElBQUssWUFDTEMsVUFBVyxZQUNYQyxPQUFRLFNBQUNDLEdBQUMsT0FBSywyQkFBSUEsS0FFckIsQ0FDRUosTUFBTyxXQUNQQyxJQUFLLFlBQ0xDLFVBQVcsWUFDWEcsT0FBUSxTQUFDQyxFQUFHQyxHQUNWLE9BQUlELEVBQUVFLFVBQVlELEVBQUVDLFVBQWtCLEVBQ2xDRixFQUFFRSxVQUFZRCxFQUFFQyxXQUFtQixFQUNoQyxJQUdYLENBQ0VSLE1BQU8sV0FD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LFVBQVUsZUFBZXVCLElBQUksb0NBRW5DLGtCQUFDLElBQUssQ0FDSjVELFFBQVNBLEVBQ1Q2RCxXQUFZM0UsRUFDWjRFLFdBQVksQ0FBRUMsZUFBZSxFQUFNQyxTQUFVLENBQUMiLCJmaWxlIjoiMTQuZmFlYTc0ZTdjYWM0ZDE3MDY0MjIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBCdXR0b24sIG1lc3NhZ2UsIE1vZGFsLCBSYWRpbywgU3BpbiwgVGFibGUsIFRvb2x0aXAgfSBmcm9tICdhbnRkJztcbmltcG9ydCBhZG1pbkFwaSBmcm9tICdhcGlzL2FkbWluQXBpJztcbmltcG9ydCBoZWxwZXJzIGZyb20gJ2hlbHBlcnMnO1xuaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBMaW5rIH0gZnJvbSAncmVhY3Qtcm91dGVyLWRvbSc7XG5cbmZ1bmN0aW9uIGdlbmVyYXRlRmlsdGVyT3JkZXIoKSB7XG4gIGxldCByZXN1bHQgPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCA3OyArK2kpIHtcbiAgICByZXN1bHQucHVzaCh7IHZhbHVlOiBpLCB0ZXh0OiBoZWxwZXJzLmNvbnZlcnRPcmRlclN0YXR1cyhpKSB9KTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiBPcmRlckxpc3QoKSB7XG4gIGNvbnN0IFtkYXRhLCBzZXREYXRhXSA9IHVzZVN0YXRlKFtdKTtcbiAgY29uc3QgW2lzTG9hZGluZywgc2V0SXNMb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpO1xuXG4gIC8vIGV2ZW50OiBD4bqtcCBuaOG6rXQgdHLhuqFuZyB0aMOhaSDEkcahbiBow6BuZ1xuICBjb25zdCB1cGRhdGVPcmRlclN0YXR1cyA9IGFzeW5jIChpZCwgb3JkZXJTdGF0dXMpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhZG1pbkFwaS5wb3N0VXBkYXRlT3JkZXJTdGF0dXMoaWQsIG9yZGVyU3RhdHVzKTtcbiAgICAgIGlmIChyZXNwb25zZSkge1xuICAgICAgICBtZXNzYWdlLnN1Y2Nlc3MoJ0Phuq1wIG5o4bqtdCB0aMOgbmggY8O0bmcnKTtcbiAgICAgICAgc2V0RGF0YShcbiAgICAgICAgICBkYXRhLm1hcCgoaXRlbSkgPT5cbiAgICAgICAgICAgIGl0ZW0ub3JkZXJJZCA9PT0gaWQgPyB7IC4uLml0ZW0sIG9yZGVyU3RhdHVzIH0gOiB7IC4uLml0ZW0gfSxcbiAgICAgICAgICApLFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBtZXNzYWdlLnN1Y2Nlc3MoJ0Phuq1wIG5o4bqtdCB0aOG6pXQgYuG6oWknKTtcbiAgICB9XG4gIH07XG5cbiAgLy8gbW9kYWwgY+G6rXAgbmjhuq10IHRy4bqhbmcgdGjDoWkgxJHGoW4gaMOgbmdcbiAgZnVuY3Rpb24gVXBkYXRlT3JkZXJTdGF0dXNNb2RhbChkZWZhdWx0VmFsID0gMCwgb3JkZXJDb2RlLCBvcmRlcklkKSB7XG4gICAgbGV0IHZhbHVlQ3VyciA9IGRlZmF1bHRWYWw7XG4gICAgY29uc3QgbW9kYWwgPSBNb2RhbC5pbmZvKHtcbiAgICAgIHdpZHRoOiA3NjgsXG4gICAgICB0aXRsZTogYEPhuq1wIG5o4bqtdCB0cuG6oW5nIHRow6FpIMSRxqFuIGjDoG5nICMke29yZGVyQ29kZX1gLFxuICAgICAgY29udGVudDogKFxuICAgICAgICA8UmFkaW8uR3JvdXBcbiAgICAgICAgICBkZWZhdWx0VmFsdWU9e2RlZmF1bHRWYWx9XG4gICAgICAgICAgb25DaGFuZ2U9eyh2KSA9PiAodmFsdWVDdXJyID0gdi50YXJnZXQudmFsdWUpfVxuICAgICAgICAgIGNsYXNzTmFtZT1cIm0tdC0xMlwiPlxuICAgICAgICAgIHtnZW5lcmF0ZUZpbHRlck9yZGVyKCkubWFwKChpdGVtLCBpbmRleCkgPT4gKFxuICAgICAgICAgICAgPFJhZGlvIGNsYXNzTmFtZT1cIm0tYi04XCIga2V5PXtpbmRleH0gdmFsdWU9e2l0ZW0udmFsdWV9PlxuICAgICAgICAgICAgICB7aXRlbS50ZXh0fVxuICAgICAgICAgICAgPC9SYWRpbz5cbiAgICAgICAgICApKX1cbiAgICAgICAgPC9SYWRpby5Hcm91cD5cbiAgICAgICksXG4gICAgICBjZW50ZXJlZDogdHJ1ZSxcbiAgICAgIGljb246IG51bGwsXG4gICAgICBva1RleHQ6ICdD4bqtcCBuaOG6rXQnLFxuICAgICAgb25PazogKCkgPT4ge1xuICAgICAgICB1cGRhdGVPcmRlclN0YXR1cyhvcmRlcklkLCB2YWx1ZUN1cnIpO1xuICAgICAgICBtb2RhbC5kZXN0cm95KCk7XG4gICAgICB9LFxuICAgIH0pO1xuICB9XG5cbiAgY29uc3QgY29sdW1ucyA9IFtcbiAgICB7XG4gICAgICB0aXRsZTogJ2tow6FjaCBow6BuZycsXG4gICAgICBrZXk6ICdvd25lcicsXG4gICAgICBkYXRhSW5kZXg6ICdvd25lcicsXG4gICAgfSxcbiAgICB7XG4gICAgICB0aXRsZTogJ03DoyDEkcahbiBow6BuZycsXG4gICAgICBrZXk6ICdvcmRlckNvZGUnLFxuICAgICAgZGF0YUluZGV4OiAnb3JkZXJDb2RlJyxcbiAgICAgIHJlbmRlcjogKHYpID0+IDxhPnt2fTwvYT4sXG4gICAgfSxcbiAgICB7XG4gICAgICB0aXRsZTogJ05nw6B5IMSR4bq3dCcsXG4gICAgICBrZXk6ICdvcmRlckRhdGUnLFxuICAgICAgZGF0YUluZGV4OiAnb3JkZXJEYXRlJyxcbiAgICAgIHNvcnRlcjogKGEsIGIpID0+IHtcbiAgICAgICAgaWYgKGEub3JkZXJEYXRlID4gYi5vcmRlckRhdGUpIHJldHVybiAxO1xuICAgICAgICBpZiAoYS5vcmRlckRhdGUgPCBiLm9yZGVyRGF0ZSkgcmV0dXJuIC0xO1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH0sXG4gICAgfSxcbiAgICB7XG4gICAgICB0aXRsZTogJ1PhuqNuIHBo4bqpbScsXG4gICAgICBrZXk6ICdwcm9kTmFtZScsXG4gICAgICBkYXRhSW5kZXg6ICdwcm9kTmFtZScsXG4gICAgICByZW5kZXI6IChwcm9kTmFtZSwgcmVjb3JkKSA9PiAoXG4gICAgICAgIDxUb29sdGlwIHRpdGxlPXtwcm9kTmFtZX0+XG4gICAgICAgICAgPExpbmsgdG89e2AvcHJvZHVjdC8ke3JlY29yZC5pZFByb2R1Y3R9YH0+XG4gICAgICAgICAgICB7aGVscGVycy5yZWR1Y2VQcm9kdWN0TmFtZShwcm9kTmFtZSwgMzApfVxuICAgICAgICAgIDwvTGluaz5cbiAgICAgICAgPC9Ub29sdGlwPlxuICAgICAgKSxcbiAgICB9LFxuICAgIHtcbiAgICAgIHRpdGxlOiAnVOG7lW5nIHRp4buBbicsXG4gICAgICBrZXk6ICd0b3RhbE1vbmV5JyxcbiAgICAgIGRhdGFJbmRleDogJ3RvdGFsTW9uZXknLFxuICAgICAgcmVuZGVyOiAodmFsdWUpID0+IChcbiAgICAgICAgPGIgc3R5bGU9e3sgY29sb3I6ICcjMzMzJyB9fT57aGVscGVycy5mb3JtYXRQcm9kdWN0UHJpY2UodmFsdWUpfTwvYj5cbiAgICAgICksXG4gICAgICBzb3J0ZXI6IChhLCBiKSA9PiBhLnRvdGFsTW9uZXkgLSBiLnRvdGFsTW9uZXksXG4gICAgfSxcbiAgICB7XG4gICAgICB0aXRsZTogJ0hUIHRoYW5oIHRvw6FuJyxcbiAgICAgIGtleTogJ3BheW1lbnRNZXRob2QnLFxuICAgICAgZGF0YUluZGV4OiAncGF5bWVudE1ldGhvZCcsXG4gICAgICByZW5kZXI6ICh2YWx1ZSkgPT4gKHZhbHVlID09PSAwID8gJ1Rp4buBbiBt4bq3dCcgOiAnVk5QYXknKSxcbiAgICB9LFxuICAgIHtcbiAgICAgIHRpdGxlOiAnVHLhuqFuZyB0aMOhaSDEkcahbiBow6BuZycsXG4gICAgICBrZXk6ICdvcmRlclN0YXR1cycsXG4gICAgICBkYXRhSW5kZXg6ICdvcmRlclN0YXR1cycsXG4gICAgICBmaWx0ZXJzOiBnZW5lcmF0ZUZpbHRlck9yZGVyKCksXG4gICAgICBvbkZpbHRlcjogKHZhbHVlLCByZWNvcmQpID0+IHJlY29yZC5vcmRlclN0YXR1cyA9PT0gdmFsdWUsXG4gICAgICByZW5kZXI6ICh2YWx1ZSkgPT4gaGVscGVycy5jb252ZXJ0T3JkZXJTdGF0dXModmFsdWUpLFxuICAgIH0sXG4gICAge1xuICAgICAgdGl0bGU6ICcnLFxuICAgICAgcmVuZGVyOiAoX3YsIHJlY29yZHMpID0+IChcbiAgICAgICAgPEJ1dHRvblxuICAgICAgICAgIHR5cGU9XCJkYXNoZWRcIlxuICAgICAgICAgIG9uQ2xpY2s9eygpID0+XG4gICAgICAgICAgICBVcGRhdGVPcmRlclN0YXR1c01vZGFsKFxuICAgICAgICAgICAgICByZWNvcmRzLm9yZGVyU3RhdHVzLFxuICAgICAgICAgICAgICByZWNvcmRzLm9yZGVyQ29kZSxcbiAgICAgICAgICAgICAgcmVjb3Jkcy5vcmRlcklkLFxuICAgICAgICAgICAgKVxuICAgICAgICAgIH0+XG4gICAgICAgICAgQ+G6rXAgbmjhuq10XG4gICAgICAgIDwvQnV0dG9uPlxuICAgICAgKSxcbiAgICB9LFxuICBdO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgbGV0IGlzU3Vic2NyaWJlID0gdHJ1ZTtcbiAgICBhc3luYyBmdW5jdGlvbiBnZXRPcmRlckxpc3QoKSB7XG4gICAgICB0cnkge1xuICAgICAgICBzZXRJc0xvYWRpbmcodHJ1ZSk7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYWRtaW5BcGkuZ2V0T3JkZXJMaXN0KCk7XG4gICAgICAgIGlmIChpc1N1YnNjcmliZSAmJiByZXNwb25zZSkge1xuICAgICAgICAgIGNvbnN0IHsgbGlzdCB9ID0gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICBjb25zdCBuZXdMaXN0ID0gbGlzdC5tYXAoKGl0ZW0sIGluZGV4KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBrZXk6IGluZGV4LFxuICAgICAgICAgICAgICBvd25lcjogaXRlbS5vd25lcixcbiAgICAgICAgICAgICAgb3JkZXJDb2RlOiBpdGVtLm9yZGVyQ29kZSxcbiAgICAgICAgICAgICAgb3JkZXJEYXRlOiBoZWxwZXJzLmZvcm1hdE9yZGVyRGF0ZShpdGVtLm9yZGVyRGF0ZSksXG4gICAgICAgICAgICAgIHByb2ROYW1lOiBpdGVtLm9yZGVyUHJvZC5uYW1lLFxuICAgICAgICAgICAgICB0b3RhbE1vbmV5OlxuICAgICAgICAgICAgICAgIGl0ZW0ubnVtT2ZQcm9kICpcbiAgICAgICAgICAgICAgICAoaXRlbS5vcmRlclByb2QucHJpY2UgLVxuICAgICAgICAgICAgICAgICAgKGl0ZW0ub3JkZXJQcm9kLnByaWNlICogaXRlbS5vcmRlclByb2QuZGlzY291bnQpIC8gMTAwKSxcbiAgICAgICAgICAgICAgcGF5bWVudE1ldGhvZDogaXRlbS5wYXltZW50TWV0aG9kLFxuICAgICAgICAgICAgICBvcmRlclN0YXR1czogaXRlbS5vcmRlclN0YXR1cyxcbiAgICAgICAgICAgICAgaWRQcm9kdWN0OiBpdGVtLm9yZGVyUHJvZC5pZCxcbiAgICAgICAgICAgICAgb3JkZXJJZDogaXRlbS5faWQsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldERhdGEoWy4uLm5ld0xpc3RdKTtcbiAgICAgICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBpZiAoaXNTdWJzY3JpYmUpIHNldElzTG9hZGluZyhmYWxzZSk7XG4gICAgICB9XG4gICAgfVxuICAgIGdldE9yZGVyTGlzdCgpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpc1N1YnNjcmliZSA9IGZhbHNlO1xuICAgIH07XG4gIH0sIFtdKTtcblxuICByZXR1cm4gKFxuICAgIDw+XG4gICAgICB7aXNMb2FkaW5nID8gKFxuICAgICAgICA8U3BpbiBjbGFzc05hbWU9XCJ0cmFucy1jZW50ZXJcIiB0aXA9XCLEkGFuZyBs4bqleSBkYW5oIHPDoWNoIMSRxqFuIGjDoG5nIC4uLlwiIC8+XG4gICAgICApIDogKFxuICAgICAgICA8VGFibGVcbiAgICAgICAgICBjb2x1bW5zPXtjb2x1bW5zfVxuICAgICAgICAgIGRhdGFTb3VyY2U9e2RhdGF9XG4gICAgICAgICAgcGFnaW5hdGlvbj17eyBzaG93TGVzc0l0ZW1zOiB0cnVlLCBwb3NpdGlvbjogWydib3R0b21DZW50ZXInXSB9fVxuICAgICAgICAvPlxuICAgICAgKX1cbiAgICA8Lz5cbiAgKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgT3JkZXJMaXN0O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==